import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as c,c as i,b as n,d as s,e as t,a as p}from"./app-DCsLG_oX.js";const l={},u=p('<h1 id="微信公众号关键词自动回复" tabindex="-1"><a class="header-anchor" href="#微信公众号关键词自动回复"><span>微信公众号关键词自动回复</span></a></h1><p><strong>实现展示</strong></p><figure><img src="https://pic.imgdb.cn/item/64cdfbac1ddac507cc1c2a5e.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="适用场景" tabindex="-1"><a class="header-anchor" href="#适用场景"><span>适用场景</span></a></h2><p>当我们个人在接入微信登录时需要微信认证，个人认证不了，这时就可以使用公众号关键词自动回复获取验证码实现登录功能。</p><p><mark>不说废话，直接开干</mark></p><h2 id="实现步骤" tabindex="-1"><a class="header-anchor" href="#实现步骤"><span>实现步骤</span></a></h2><h3 id="_1、去微信公众平台注册" tabindex="-1"><a class="header-anchor" href="#_1、去微信公众平台注册"><span>①、去微信公众平台注册</span></a></h3>',8),k={href:"https://mp.weixin.qq.com/",target:"_blank",rel:"noopener noreferrer"},r=n("figure",null,[n("img",{src:"https://pic.imgdb.cn/item/64cdf7fa1ddac507cc11974c.jpg",alt:"",tabindex:"0",loading:"lazy"}),n("figcaption")],-1),d=n("p",null,"在公众号平台选择基础配置进行服务器的配置，如下图",-1),m=n("figure",null,[n("img",{src:"http://img.shiyit.com/1641892470689.jpg",alt:"",tabindex:"0",loading:"lazy"}),n("figcaption")],-1),v=n("p",null,"之后进入到你的开发者中心",-1),g=n("figure",null,[n("img",{src:"https://ucc.alicdn.com/pic/developer-ecology/k42lotwzsqevk_587689e273114e97b88ec44b3cf752d3.png",alt:"",tabindex:"0",loading:"lazy"}),n("figcaption")],-1),b={href:"https://so.csdn.net/so/search?q=%E5%85%AC%E7%BD%91IP&spm=1001.2101.3001.7020",target:"_blank",rel:"noopener noreferrer"},f=p(`<figure><img src="https://ucc.alicdn.com/pic/developer-ecology/k42lotwzsqevk_88431e98254544c4aec408c014748f70.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ip:必须是你公网ip地址</p><p>之后开始配置你的服务器信息</p><figure><img src="https://ucc.alicdn.com/pic/developer-ecology/k42lotwzsqevk_2dd892a33ff84b45b11cc421d1e0a847.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>首先是URL，这里的URL需要填写的是</p><p>http://ip:80/path（这里的path满足请求路径的格式即可）</p><p>或者是</p><p>https://ip:443/path</p><figure><img src="https://ucc.alicdn.com/pic/developer-ecology/k42lotwzsqevk_d514f8ed578c4e0f8ecf3aff40a07953.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>以上就是整合SpringBoot时需要的配置属性</p><h3 id="_2、整合springboot" tabindex="-1"><a class="header-anchor" href="#_2、整合springboot"><span>②、整合SpringBoot</span></a></h3><p><strong>导入依赖</strong></p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>微信公众号关键词自动回复<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>binarywang<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>weixin<span class="token operator">-</span>java<span class="token operator">-</span>mp<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">3.4</span><span class="token number">.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">wechat</span><span class="token punctuation">:</span>
  <span class="token key atrule">app-id</span><span class="token punctuation">:</span> <span class="token comment">#公众号appid</span>
  <span class="token key atrule">secret</span><span class="token punctuation">:</span> <span class="token comment">#公众号密钥</span>
  <span class="token key atrule">token</span><span class="token punctuation">:</span> towelove<span class="token comment">#token自己随便设置一个，但是必须对应公众号里面设置的一样</span>
  <span class="token key atrule">aesKey</span><span class="token punctuation">:</span> <span class="token comment">#加密密钥，可以选随机生成</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>shiyi<span class="token punctuation">.</span>config<span class="token punctuation">.</span>properties</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">ConfigurationProperties</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;wechat&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WechatProperties</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> appId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> secret<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> token<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> aesKey<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>shiyi<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>shiyi<span class="token punctuation">.</span>config<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">WechatProperties</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>chanjar<span class="token punctuation">.</span>weixin<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">WxMpConfigStorage</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>chanjar<span class="token punctuation">.</span>weixin<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">WxMpInMemoryConfigStorage</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>chanjar<span class="token punctuation">.</span>weixin<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">WxMpService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>chanjar<span class="token punctuation">.</span>weixin<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>api<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">WxMpServiceImpl</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WechatConfiguration</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">WechatProperties</span> wechatMpProperties<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">WxMpConfigStorage</span> <span class="token function">wxMpConfigStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">WxMpInMemoryConfigStorage</span> configStorage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WxMpInMemoryConfigStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configStorage<span class="token punctuation">.</span><span class="token function">setAppId</span><span class="token punctuation">(</span>wechatMpProperties<span class="token punctuation">.</span><span class="token function">getAppId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configStorage<span class="token punctuation">.</span><span class="token function">setSecret</span><span class="token punctuation">(</span>wechatMpProperties<span class="token punctuation">.</span><span class="token function">getSecret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configStorage<span class="token punctuation">.</span><span class="token function">setToken</span><span class="token punctuation">(</span>wechatMpProperties<span class="token punctuation">.</span><span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        configStorage<span class="token punctuation">.</span><span class="token function">setAesKey</span><span class="token punctuation">(</span>wechatMpProperties<span class="token punctuation">.</span><span class="token function">getAesKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> configStorage<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">WxMpService</span> <span class="token function">wxMpService</span><span class="token punctuation">(</span><span class="token class-name">WxMpConfigStorage</span> wxMpConfigStorage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">WxMpService</span> wxMpService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WxMpServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        wxMpService<span class="token punctuation">.</span><span class="token function">setWxMpConfigStorage</span><span class="token punctuation">(</span>wxMpConfigStorage<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> wxMpService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>shiyi<span class="token punctuation">.</span>controller<span class="token punctuation">.</span>api</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>shiyi<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span><span class="token class-name">RedisConstants</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>shiyi<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">RedisService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>shiyi<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">RandomUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">RequiredArgsConstructor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>chanjar<span class="token punctuation">.</span>weixin<span class="token punctuation">.</span>common<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">WxConsts</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>chanjar<span class="token punctuation">.</span>weixin<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">WxMpService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>chanjar<span class="token punctuation">.</span>weixin<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>bean<span class="token punctuation">.</span>message<span class="token punctuation">.</span></span><span class="token class-name">WxMpXmlMessage</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>chanjar<span class="token punctuation">.</span>weixin<span class="token punctuation">.</span>mp<span class="token punctuation">.</span>bean<span class="token punctuation">.</span>message<span class="token punctuation">.</span></span><span class="token class-name">WxMpXmlOutTextMessage</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">MessageFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeUnit</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> weixueshi
 * <span class="token keyword">@date</span> 2023/8/4
 * <span class="token keyword">@apiNote</span>
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RestController</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/wx&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@RequiredArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApiWeChatController</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">WxMpService</span> wxMpService<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">RedisService</span> redisService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>produces <span class="token operator">=</span> <span class="token string">&quot;text/plain;charset=utf-8&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">checkSignature</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;signature&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> signature<span class="token punctuation">,</span>
                                 <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;timestamp&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> timestamp<span class="token punctuation">,</span>
                                 <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;nonce&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> nonce<span class="token punctuation">,</span>
                                 <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;echostr&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> echostr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;微信公众号get请求进来了....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>wxMpService<span class="token punctuation">.</span><span class="token function">checkSignature</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">,</span> nonce<span class="token punctuation">,</span> signature<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> echostr<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Invalid signature&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 转发微信返回的消息
     * <span class="token keyword">@param</span> <span class="token parameter">request</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span>produces <span class="token operator">=</span> <span class="token string">&quot;application/xml; charset=UTF-8&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">handleMsg</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">WxMpXmlMessage</span> message <span class="token operator">=</span> <span class="token class-name">WxMpXmlMessage</span><span class="token punctuation">.</span><span class="token function">fromXml</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> content <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;公众号请求类型:{};内容为:{}&quot;</span><span class="token punctuation">,</span> message<span class="token punctuation">.</span><span class="token function">getMsgType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">WxConsts<span class="token punctuation">.</span>XmlMsgType</span><span class="token punctuation">.</span><span class="token constant">TEXT</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getMsgType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;验证码&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">String</span> code <span class="token operator">=</span> <span class="token class-name">RandomUtils</span><span class="token punctuation">.</span><span class="token function">generationNumber</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token class-name">MessageFormat</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;您的本次验证码:{0},该验证码5分钟内有效。&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">WxMpXmlOutTextMessage</span> outMessage <span class="token operator">=</span> <span class="token class-name">WxMpXmlOutTextMessage</span><span class="token punctuation">.</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fromUser</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getToUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUser</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getFromUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//将code值保存在redis中</span>
                    redisService<span class="token punctuation">.</span><span class="token function">setCacheObject</span><span class="token punctuation">(</span><span class="token class-name">RedisConstants</span><span class="token punctuation">.</span><span class="token constant">WECHAT_CODE</span> <span class="token operator">+</span> code<span class="token punctuation">,</span>code<span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MINUTES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> outMessage<span class="token punctuation">.</span><span class="token function">toXml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意：项目必须上线才会整合成功，因为微信需要访问上线后的地址</strong></p><figure><img src="https://pic.imgdb.cn/item/64cdfbac1ddac507cc1c2a5e.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>`,19);function h(y,w){const a=o("ExternalLinkIcon");return c(),i("div",null,[u,n("p",null,[n("a",k,[s("微信公众平台 (qq.com)"),t(a)])]),r,d,m,v,g,n("p",null,[s("然后生成你的开发者密码，开发者id，以及设置你的IP白名单。这里的IP白名单中的IP必须是一个"),n("a",b,[s("公网IP"),t(a)]),s("，因为微信官方会把他们的请求发送到公网上，然后你接受到请求之后需要给这个请求做一个响应才能实现消息互通的功能。")]),f])}const E=e(l,[["render",h],["__file","微信公众号关键词自动回复.html.vue"]]),S=JSON.parse('{"path":"/posts/%E5%90%8E%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%85%B3%E9%94%AE%E8%AF%8D%E8%87%AA%E5%8A%A8%E5%9B%9E%E5%A4%8D.html","title":"微信公众号关键词自动回复","lang":"zh-CN","frontmatter":{"category":["后端"],"tag":["微信公众号"],"date":"2022-01-12T00:00:00.000Z","star":true,"sticky":true,"description":"微信公众号关键词自动回复 实现展示 适用场景 当我们个人在接入微信登录时需要微信认证，个人认证不了，这时就可以使用公众号关键词自动回复获取验证码实现登录功能。 不说废话，直接开干 实现步骤 ①、去微信公众平台注册 微信公众平台 (qq.com) 在公众号平台选择基础配置进行服务器的配置，如下图 之后进入到你的开发者中心 然后生成你的开发者密码，开发者i...","head":[["meta",{"property":"og:url","content":"https://swx08.github.io/vuepress/posts/%E5%90%8E%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%85%B3%E9%94%AE%E8%AF%8D%E8%87%AA%E5%8A%A8%E5%9B%9E%E5%A4%8D.html"}],["meta",{"property":"og:site_name","content":"文学博客"}],["meta",{"property":"og:title","content":"微信公众号关键词自动回复"}],["meta",{"property":"og:description","content":"微信公众号关键词自动回复 实现展示 适用场景 当我们个人在接入微信登录时需要微信认证，个人认证不了，这时就可以使用公众号关键词自动回复获取验证码实现登录功能。 不说废话，直接开干 实现步骤 ①、去微信公众平台注册 微信公众平台 (qq.com) 在公众号平台选择基础配置进行服务器的配置，如下图 之后进入到你的开发者中心 然后生成你的开发者密码，开发者i..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://pic.imgdb.cn/item/64cdfbac1ddac507cc1c2a5e.jpg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:alt","content":"微信公众号关键词自动回复"}],["meta",{"property":"article:author","content":"sixkey"}],["meta",{"property":"article:tag","content":"微信公众号"}],["meta",{"property":"article:published_time","content":"2022-01-12T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"微信公众号关键词自动回复\\",\\"image\\":[\\"https://pic.imgdb.cn/item/64cdfbac1ddac507cc1c2a5e.jpg\\",\\"https://pic.imgdb.cn/item/64cdf7fa1ddac507cc11974c.jpg\\",\\"http://img.shiyit.com/1641892470689.jpg\\",\\"https://ucc.alicdn.com/pic/developer-ecology/k42lotwzsqevk_587689e273114e97b88ec44b3cf752d3.png\\",\\"https://ucc.alicdn.com/pic/developer-ecology/k42lotwzsqevk_88431e98254544c4aec408c014748f70.png\\",\\"https://ucc.alicdn.com/pic/developer-ecology/k42lotwzsqevk_2dd892a33ff84b45b11cc421d1e0a847.png\\",\\"https://ucc.alicdn.com/pic/developer-ecology/k42lotwzsqevk_d514f8ed578c4e0f8ecf3aff40a07953.png\\",\\"https://pic.imgdb.cn/item/64cdfbac1ddac507cc1c2a5e.jpg\\"],\\"datePublished\\":\\"2022-01-12T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"sixkey\\",\\"url\\":\\"https://swx08.github.io\\"}]}"]]},"headers":[{"level":2,"title":"适用场景","slug":"适用场景","link":"#适用场景","children":[]},{"level":2,"title":"实现步骤","slug":"实现步骤","link":"#实现步骤","children":[{"level":3,"title":"①、去微信公众平台注册","slug":"_1、去微信公众平台注册","link":"#_1、去微信公众平台注册","children":[]},{"level":3,"title":"②、整合SpringBoot","slug":"_2、整合springboot","link":"#_2、整合springboot","children":[]}]}],"git":{},"readingTime":{"minutes":2.58,"words":775},"filePathRelative":"posts/后端/微信公众号/微信公众号关键词自动回复.md","localizedDate":"2022年1月12日","excerpt":"\\n<p><strong>实现展示</strong></p>\\n<figure><img src=\\"https://pic.imgdb.cn/item/64cdfbac1ddac507cc1c2a5e.jpg\\" alt=\\"\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption></figcaption></figure>\\n<h2>适用场景</h2>\\n<p>当我们个人在接入微信登录时需要微信认证，个人认证不了，这时就可以使用公众号关键词自动回复获取验证码实现登录功能。</p>\\n<p><mark>不说废话，直接开干</mark></p>\\n<h2>实现步骤</h2>\\n<h3>①、去微信公众平台注册</h3>","autoDesc":true}');export{E as comp,S as data};
